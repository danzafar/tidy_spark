
unsupported type
================

> tibble(x = 1, y = c(1, 2, 2), z = runif(3)) %>% summarise(a = env(a = 1))
Error in env(a = 1): could not find function "env"

> tibble(x = 1, y = c(1, 2, 2), z = runif(3)) %>% group_by(x, y) %>% summarise(a = env(
+   a = 1))
Error in env(a = 1): could not find function "env"

> tibble(x = 1, y = c(1, 2, 2), z = runif(3)) %>% rowwise() %>% summarise(a = lm(
+   y ~ x))
Error: Column `a` must be length 1 (a summary value), not 12


mixed types
===========

> tibble(id = 1:2, a = list(1, "2")) %>% group_by(id) %>% summarise(a = a[[1]])
Error: Column `a` can't promote group 1 to numeric

> tibble(id = 1:2, a = list(1, "2")) %>% rowwise() %>% summarise(a = a[[1]])
Error: Column `a` can't promote group 1 to numeric


incompatible size
=================

> tibble(z = 1) %>% summarise(x = 1:3, y = 1:2)
Error: Column `x` must be length 1 (a summary value), not 3

> tibble(z = 1:2) %>% group_by(z) %>% summarise(x = 1:3, y = 1:2)
Error: Column `x` must be length 1 (a summary value), not 3

> tibble(z = 2:1) %>% group_by(z) %>% summarise(x = seq_len(z), y = 1:2)
Error: Column `x` must be length 1 (a summary value), not 2


Missing variable
================

> summarise(mtcars, a = mean(not_there))
Error in mean(not_there): object 'not_there' not found

> summarise(group_by(mtcars, cyl), a = mean(not_there))
Error in mean(not_there): object 'not_there' not found


.data pronoun
=============

> summarise(tibble(a = 1), c = .data$b)
Error: Column `b` not found in `.data`

> summarise(group_by(tibble(a = 1:3), a), c = .data$b)
Error: Column `b` not found in `.data`

